{% extends 'base.html' %}


{% block style %}
#post {
  cursor: pointer;
  height: 250px;
}
.place {
  /* ë²„íŠ¼ì„ ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
  padding: 10px 10px;
  /* ì‚´ì§ íŒ¨ë”©ì„ ì¶”ê°€í•©ë‹ˆë‹¤. */
  transform: translateY(-110%);
  position: absolute;
  right: 1%;
}
#btn-container {
  margin-bottom: 10px;
  display: flex;
}

.id {
  margin-bottom: 15px;
}
.pagination{
  margin-bottom: 1%
}

#content {
  width: 350px; /* ì›í•˜ëŠ” ë„ˆë¹„ë¡œ ì„¤ì •í•˜ì„¸ìš” */
  max-height: calc(1.2em * 3); /* ì„¸ ì¤„ê¹Œì§€ì˜ ë†’ì´ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤ */
  overflow: hidden;
  display: -webkit-box; /* ì›¹í‚· ê¸°ë°˜ ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ì¤‘ ì¤„ì˜ í…ìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì†ì„± */
  -webkit-line-clamp: 3; /* ë³´ì—¬ì¤„ ìµœëŒ€ ì¤„ ìˆ˜ */
  -webkit-box-orient: vertical; /* ìˆ˜ì§ ë°©í–¥ìœ¼ë¡œ ì •ë ¬ */
  text-overflow: ellipsis; /* ë„˜ì¹œ í…ìŠ¤íŠ¸ë¥¼ ë§ì¤„ì„í‘œ(...)ë¡œ ëŒ€ì²´ */
  white-space: pre-line; /* ì¤„ ë°”ê¿ˆì„ í—ˆìš©í•˜ì—¬ ë§ì¤„ì„í‘œê°€ ë‚˜ì˜¤ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤ */
}

{% endblock %}

{% block content %}
<section class="section mb-6">
  <article class="panel is-link">
    <p class="panel-heading">ì˜¤ëŠ˜ì˜ ì •ë³´ ğŸ“£</p>
    {% if toptitle == False %}
    <p class="panel-block">
      ì˜¤ëŠ˜ ì¢‹ì•„ìš” ë°›ì€ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.
    </p>
  {% else %}
  <a href="/post?pid={{toptitle._id}}" class="panel-block is-active">
    <span class="panel-icon">
      <i class="fas fa-book" aria-hidden="true"></i>
    </span>
    {{ toptitle.title }}
</a>
  {% endif %}
  </article>
</section>

{% if id != null %}

<div class="container" id="btn-container">
  <button align="right" class="button is-success place" onclick="location.href='/create'">ê¸€ì“°ê¸°</button>
</div>
{% endif %}
<div class="tile is-ancestor">
  {% for _, idx in zip(posts, [0,1,2]) %}
  <div class="tile is-vertical is-4" id="post" onclick="location.href='/post?pid={{posts[idx]._id}}'">
    <div class="tile is-parent">
      <article class="tile is-child box">
        <p class="title">{{ posts[idx].title }}</p>
        <p class="id">{{ posts[idx].id }}</p>
        <p class="subtitle" id="content">{{ posts[idx].content }}</p>
      </article>
    </div>
  </div>
  {% endfor %}
</div>

<div class="tile is-ancestor">
{% for idx in range(3, posts|length) %}
<div class="tile is-vertical is-4" id="post" onclick="location.href='/post?pid={{posts[idx]._id}}'">
  <div class="tile is-parent">
    <article class="tile is-child box">
      <p class="title">{{ posts[idx].title }}</p>
      <p class="id">{{ posts[idx].id }}</p>
      <p class="subtitle" id="content">{{ posts[idx].content }}</p>
    </article>
  </div>
</div>
{% endfor %}
</div>

<nav class="pagination is-centered" role="navigation" aria-label="pagination">
{% set page = page|int %}
{% if page != 1 %}
<a class="pagination-previous" href="?page={{ page - 1 }}">Previous</a>
{% endif %}
{% set last = last|int %}
{% if page != last %}
<a class="pagination-next" href="?page={{ page + 1 }}">Next page</a>
{% endif %}
<ul class="pagination-list">
  {% if page != 1 %}
    <li>
      <a class="pagination-link" href="?page={{ page - 1 }}">{{ page - 1 }}</a>
    </li>
  {% endif %}
  <li>
    <a class="pagination-link is-current" aria-label="Page 46" aria-current="page">{{ page }}</a>
  </li>
  {% if page != last %}
    <li>
      <a class="pagination-link" href="?page={{ page + 1 }}">{{ page + 1 }}</a>
    </li>
  {% endif %}
</ul>
</nav>
{% endblock %}
